# æ¼«å±•æŸ¥è¯¢ API

> åŸºäºPHPæ¨¡æ‹Ÿè¯·æ±‚"æ— å·®åˆ«åŒäººç«™ï¼ˆCPPï¼‰"æ•°æ®çš„æ¼«å±•æŸ¥è¯¢API

# ä¸ºä»€ä¹ˆåˆ¶ä½œè¿™ä¸ªï¼Ÿ

å› ä¸ºä»¥å‰ç”¨çš„APIå·²ç»åœ¨Koishiæ’ä»¶å†…æ— æ³•ä½¿ç”¨ï¼Œä¸”ï¼š

1.æ²¡æœ‰å±•ä¼šçŠ¶æ€ï¼ˆè¿›è¡Œä¸­/å€’è®¡æ—¶/å·²å–æ¶ˆï¼‰åŠŸèƒ½

2.ä¸æŒ‰ç…§æ—¶é—´æ’åº

é‚è‡ªå·±æŠ“åŒ…å†™äº†æ­¤é¡¹ç›®ç”¨äºæ›¿ä»£æ—§çš„API
ï¼ˆç›®å‰è‡ªç”¨ç¨³å®šä½¿ç”¨ï¼‰

## âœ¨ ç‰¹æ€§

- ğŸ” æ”¯æŒå…³é”®è¯æœç´¢æ¼«å±•ä¿¡æ¯
- ğŸ“… è‡ªåŠ¨æ ‡æ³¨å±•ä¼šçŠ¶æ€ï¼ˆè¿›è¡Œä¸­/å€’è®¡æ—¶/å·²å–æ¶ˆï¼‰
- ğŸ“Š å¤šé¡µæ•°æ®è‡ªåŠ¨èšåˆ
- ğŸ¯ æ™ºèƒ½æ—¶é—´æ’åº
- ğŸ–¼ï¸ å®Œæ•´çš„å›¾ç‰‡ URL å¤„ç†
- ğŸ› è°ƒè¯•æ¨¡å¼æ”¯æŒ

## ğŸ“‹ è¦æ±‚

- PHP 7.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- cURL æ‰©å±•
- æ”¯æŒ JSON å¤„ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

1. å…‹éš†é¡¹ç›®åˆ°ä½ çš„æœåŠ¡å™¨
```bash
git clone https://github.com/Akagicv/CPP_Search.git
cd CPP_Search
```

2. ç¡®ä¿ PHP å’Œ cURL æ‰©å±•å·²å®‰è£…
```bash
php -v
php -m | grep curl
```

3. é…ç½® Web æœåŠ¡å™¨ï¼ˆApache/Nginxï¼‰æŒ‡å‘é¡¹ç›®ç›®å½•

### ä½¿ç”¨æ–¹æ³•

#### æœ€ç®€å•çš„åŠæ³•ï¼ˆæœ¬äººä½¿ç”¨åœºæ™¯ï¼‰

æ¥å…¥koishiçš„anime-convention-lizard(æˆ–2)æ’ä»¶
è¾“å…¥è¯¥PHPéƒ¨ç½²çš„åœ°å€

å¦‚æœä½ åªæ˜¯ä¸ºäº†æ¼«å±•æŸ¥è¯¢æ’ä»¶èƒ½æ­£å¸¸ä½¿ç”¨â€”â€”å¯ä»¥ç›´æ¥å¡«å†™ä¸‹é¢åœ°å€

æœ¬äººæ­å»ºçš„æ¥å£åœ°å€ï¼š https://api.mihoyo.su/manzhan.php


#### åŸºç¡€æŸ¥è¯¢

```
GET /CPP_Search.php?msg=ä¸Šæµ·
```

#### è°ƒè¯•æ¨¡å¼

æŸ¥çœ‹åŸå§‹ JSON æ•°æ®ï¼š
```
GET /CPP_Search.php?msg=ä¸Šæµ·&debug=raw
```

æŸ¥çœ‹åŸå§‹å“åº”ï¼š
```
GET /CPP_Search.php?msg=ä¸Šæµ·&debug=response
```

## ğŸ“– API æ–‡æ¡£

### è¯·æ±‚å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| msg | string | æ˜¯ | æœç´¢å…³é”®è¯ï¼ˆåœ°åŒºã€å±•ä¼šåç§°ç­‰ï¼‰ |
| debug | string | å¦ | è°ƒè¯•æ¨¡å¼ï¼š`raw`ï¼ˆåŸå§‹æ•°æ®ï¼‰/ `response`ï¼ˆåŸå§‹å“åº”ï¼‰ |

### å“åº”æ ¼å¼

#### æˆåŠŸå“åº”ï¼ˆç¤ºä¾‹ï¼‰

```json
{
    "code": 200,
    "msg": "ä¸Šæµ·",
    "data": [
        {
            "id": 12345,
            "name": "2024ä¸Šæµ·CPå±•(è¿˜æœ‰3å¤©å¼€å§‹)",
            "tag": "ç»¼åˆå±•",
            "location": "ä¸Šæµ·å¸‚ æµ¦ä¸œæ–°åŒº",
            "address": "ä¸Šæµ·æ–°å›½é™…åšè§ˆä¸­å¿ƒ",
            "url": "https://www.allcpp.cn/allcpp/event/event.do?event=12345",
            "type": "ç»¼åˆå±•",
            "wannaGoCount": 1500,
            "circleCount": 200,
            "doujinshiCount": 300,
            "time": "2024-12-28 08:00:00",
            "appLogoPicUrl": "https://imagecdn3.allcpp.cn/upload/xxx.jpg",
            "logoPicUrl": "https://imagecdn3.allcpp.cn/upload/xxx.jpg",
            "ended": "æœªç»“æŸ",
            "isOnline": "çº¿ä¸‹"
        }
    ]
}
```

#### é”™è¯¯å“åº”

```json
{
    "code": 400,
    "msg": "è¯·æä¾›æœç´¢å…³é”®è¯",
    "data": []
}
```

### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | int | å±•ä¼š ID |
| name | string | å±•ä¼šåç§°ï¼ˆå«çŠ¶æ€æ ‡ç­¾ï¼‰ |
| tag | string | å±•ä¼šæ ‡ç­¾ |
| location | string | åœ°ç†ä½ç½®ï¼ˆçœå¸‚åŒºï¼‰ |
| address | string | è¯¦ç»†åœ°å€ |
| url | string | å±•ä¼šè¯¦æƒ…é¡µé“¾æ¥ |
| type | string | å±•ä¼šç±»å‹ï¼ˆç»¼åˆå±•/ONLY/èŒ¶ä¼šç­‰ï¼‰ |
| wannaGoCount | int | æƒ³å»äººæ•° |
| circleCount | int | ç¤¾å›¢æ•°é‡ |
| doujinshiCount | int | åŒäººå¿—æ•°é‡ |
| time | string | å¼€å§‹æ—¶é—´ |
| appLogoPicUrl | string | åº”ç”¨ Logo å›¾ç‰‡ URL |
| logoPicUrl | string | Logo å›¾ç‰‡ URL |
| ended | string | ç»“æŸçŠ¶æ€ï¼ˆæœªç»“æŸ/å·²ç»“æŸ/ç­¹å¤‡ä¸­/å·²å–æ¶ˆï¼‰ |
| isOnline | string | å±•ä¼šå½¢å¼ï¼ˆçº¿ä¸Š/çº¿ä¸‹ï¼‰ |

### çŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | è¯·æ±‚æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 500 | æœåŠ¡å™¨é”™è¯¯ |

## ğŸ¯ å±•ä¼šçŠ¶æ€æ ‡ç­¾

API ä¼šè‡ªåŠ¨ä¸ºå±•ä¼šåç§°æ·»åŠ çŠ¶æ€æ ‡ç­¾ï¼š

- `(è¿›è¡Œä¸­)` - å±•ä¼šæ­£åœ¨è¿›è¡Œ
- `(è¿˜æœ‰Xå¤©å¼€å§‹)` - å±•ä¼šå³å°†å¼€å§‹çš„å€’è®¡æ—¶
- `(å·²å–æ¶ˆ)` - å±•ä¼šå·²è¢«å–æ¶ˆ


## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### JavaScript (Fetch)

```javascript
fetch('https://your-domain.com/CPP_Search.php?msg=ä¸Šæµ·')
    .then(response => response.json())
    .then(data => {
        console.log(data.data); // å±•ä¼šåˆ—è¡¨
    });
```

### Python

```python
import requests

response = requests.get('https://your-domain.com/CPP_Search.php', params={'msg': 'ä¸Šæµ·'})
data = response.json()
print(data['data'])
```

### cURL

```bash
curl "https://your-domain.com/CPP_Search.php?msg=ä¸Šæµ·"
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨
2. æ•°æ®æ¥æºäº"æ— å·®åˆ«åŒäººç«™"(allcpp.cn)ï¼Œè¯·éµå®ˆå…¶æœåŠ¡æ¡æ¬¾
3. å»ºè®®æ·»åŠ ç¼“å­˜æœºåˆ¶ä»¥å‡å°‘æœåŠ¡å™¨å‹åŠ›
4. ç”Ÿäº§ç¯å¢ƒå»ºè®®æ·»åŠ è®¿é—®é¢‘ç‡é™åˆ¶

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [GPL3.0](LICENSE) å¼€æºåè®®

## ğŸ”— ç›¸å…³é“¾æ¥

- æ•°æ®æ¥æºï¼š[æ— å·®åˆ«åŒäººç«™](https://www.allcpp.cn/)
- Koishiæ’ä»¶ï¼ˆè‡ªç”¨çš„ç‰ˆæœ¬ï¼‰ï¼š[anime-convention-lizard](https://github.com/lizard0126/anime-convention-lizard)
- Koishiæ’ä»¶ï¼ˆå¦ä¸€ä½å¤§ä½¬çš„æ”¹ç‰ˆï¼‰ï¼š[anime-convention-lizard2](https://github.com/yoyokity/anime-convention-lizard2)

---


â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸ª Starï¼


